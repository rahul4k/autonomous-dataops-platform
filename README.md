# Autonomous DataOps Platform

An AI-powered, self-healing DataOps platform that uses autonomous agents to:
- Read and interpret pipeline logs
- Detect root causes of failure
- Generate optimized code fixes
- Open GitHub Pull Requests automatically
- Notify stakeholders across Slack/Email

This project demonstrates how large language models (LLMs), observability signals, and orchestration systems like Airflow can enable **autonomous data engineering workflows**.

---

## ğŸ“Œ Key Features

### ğŸ¤– Agentic Services
- **Log Reader Agent**: Extracts anomalies, regex patterns, and error signatures from logs.
- **Root-Cause Analysis Agent**: Maps log patterns to known failure classes.
- **Fixer/Optimizer Agent**: Generates improved Spark code using error context.
- **PR Generator Agent**: Integrates with GitHub to push fixes automatically.
- **Notifier Agent**: Sends alerts with RCA + recommended actions.

---

## ğŸ“¡ Pipeline Automation
Includes:
- Sample **Airflow DAG**
- Sample **PySpark job (buggy)** and **fixed version (generated by agent)**

---

## â˜ï¸ Cloud Setup (GCP)
Terraform templates for:
- Artifact Registry
- Cloud Composer (Airflow)
- GCS buckets
- Cloud Run (for agents)
- Service Accounts + IAM

---

## ğŸ§  Architecture
See `/docs/architecture.md`

## ğŸ§ª Tests
Unit and integration tests for each agent.

---

## ğŸš€ Getting Started

```bash
git clone <your_repo_url>
cd autonomous-dataops-platform

## Architecture Diagram
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚         Production Pipelines        â”‚
                         â”‚  (Airflow / Dataproc / Glue / EMR)  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â”‚ Job Fails
                                         â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚          Failure Event Producer          â”‚
                      â”‚   (Push event: log_path, job_id, etc.)  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚         ADP Event Orchestrator           â”‚
                      â”‚ (Pub/Sub or Kafka or local scheduler)    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                 â”‚                                â”‚
     â–¼                                 â–¼                                â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Log Reader Agent â”‚       â”‚   Root Cause Agent     â”‚        â”‚  Spark Metrics Agent â”‚
â”‚------------------â”‚       â”‚------------------------â”‚        â”‚----------------------â”‚
â”‚ Parse logs       â”‚       â”‚ Identify error type    â”‚        â”‚  Pull Spark UI JSON  â”‚
â”‚ Classify failure â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚ Extract diagnostics    â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Identify skew/oom   â”‚
â”‚ (regex/ML)       â”‚       â”‚ Suggest actions        â”‚        â”‚  Validate RCA        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚         Fixer / Code Optimizer Agent     â”‚
                      â”‚   (AST-based safe code transformations)  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚ Patched Code
                                          â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚      Fix â†’ PR Orchestrator Agent       â”‚
                       â”‚ Create branch, commit patch, open PR   â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚ Draft PR
                                           â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚           GitHub / GitLab PR           â”‚
                        â”‚   Human review + merge on approval     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   Slack / Teams / Email Notification     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

High-Level Explanation 
------------------------
ğŸš€ Autonomous DataOps Platform â€“ System Overview

The ADP system automatically detects, diagnoses, and fixes production data pipeline failures using a multi-agent, event-driven architecture:

Failure Event Producer captures job failures from Airflow/Dataproc and emits machine-readable events.

ADP Orchestrator routes failure events to specialized agents.

Log Reader Agent parses raw logs, classifies errors, and extracts structured signals.

Root Cause Agent applies rule-based + Spark-aware logic to identify the root cause.

Spark Metrics Agent fetches stage/task metrics from Spark UI to validate skew, OOM, shuffle issues, etc.

Fixer/Optimizer Agent applies AST-based safe code transformations (rename columns, broadcast joins, repartition).

Fixâ€“PR Orchestrator creates a GitHub branch, commits patched code, and opens a draft PR.

Notification Agent posts PR links + RCA summary to Slack or email.

Human reviewer validates and merges the PR.

This architecture mirrors how real SRE/DataOps automation systems work at Netflix, Uber, and Databricks.

Component-Level Breakdown (Put in your README or slide deck)
---------------------------------------------------------------
1. Production Pipelines

Distributed Spark pipelines running on Dataproc/EMR/Glue

Triggers failure events on retries/exhaustion

2. Failure Event Producer

Airflow failure callback

Writes event.json (dag_id, task_id, log_url, local_log_path)

3. Event Orchestrator

Simple local Python orchestrator OR Pub/Sub/Kafka

Dispatches events to agents

4. Log Reader Agent

Regex + structured log parsing

Detects error classes: OOM, schema, skew, missing file, Py4J, SparkException

Outputs log_summary.json

5. Root Cause Agent

Applies rule-based RCA + heuristics

Infers whether to:

Broadcast join

Add repartition

Rename columns

Increase executor memory

Fix schema drift

6. Spark Metrics Agent

Pulls Spark History Server API JSON

Detects:

Stage retries

Task failures

Stragglers

Skew ratios

OOM signals

Shuffle blowups

7. Fixer / Optimizer Agent

Uses AST-based code modification (libcst)

Safe, deterministic changes:

Add broadcast()

Insert .repartition()

Add withColumnRenamed()

Insert config hints

8. Fix â†’ PR Orchestrator

Creates a branch

Commits patched code

Generates a draft PR with:

Patch diff

RCA summary

Explainability

Confidence score

9. Notification Agent

Posts PR URL + summary to Slack/Teams